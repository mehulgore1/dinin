{"version":3,"file":"react-error-boundary.umd.min.js","sources":["../src/index.js","../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"],"sourcesContent":["import React from 'react'\n\nconst changedArray = (a = [], b = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = {error: null, info: null}\nclass ErrorBoundary extends React.Component {\n  state = initialState\n  resetErrorBoundary = (...args) => {\n    this.props.onReset?.(...args)\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error, info) {\n    this.props.onError?.(error, info?.componentStack)\n    this.setState({error, info})\n  }\n\n  componentDidUpdate(prevProps) {\n    const {error} = this.state\n    const {resetKeys} = this.props\n    if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.setState(initialState)\n    }\n  }\n\n  render() {\n    const {error, info} = this.state\n    const {fallbackRender, FallbackComponent, fallback} = this.props\n\n    if (error !== null) {\n      const props = {\n        componentStack: info?.componentStack,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop',\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary(Component, errorBoundaryProps) {\n  function Wrapped(props) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler(givenError) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport {ErrorBoundary, withErrorBoundary, useErrorHandler}\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}"],"names":["initialState","error","info","ErrorBoundary","subClass","superClass","state","resetErrorBoundary","args","props","onReset","setState","prototype","Object","create","constructor","__proto__","componentDidCatch","onError","componentStack","componentDidUpdate","prevProps","a","b","this","resetKeys","length","some","item","index","is","onResetKeysChange","render","fallbackRender","FallbackComponent","fallback","React","isValidElement","Error","children","Component","givenError","useState","setError","errorBoundaryProps","Wrapped","name","displayName"],"mappings":"sTAEA,IAGMA,EAAe,CAACC,MAAO,KAAMC,KAAM,MACnCC,cCNS,IAAwBC,EAAUC,0IDO/CC,MAAQN,IACRO,mBAAqB,wCAAIC,2BAAAA,0BAClBC,MAAMC,cAAND,OAAMC,gBAAaF,KACnBG,SAASX,MCV+BK,KAAVD,KAC5BQ,UAAYC,OAAOC,OAAOT,EAAWO,WAC9CR,EAASQ,UAAUG,YAAcX,EACjCA,EAASY,UAAYX,6BDUrBY,kBAAA,SAAkBhB,EAAOC,4BAClBO,OAAMS,mBAAUjB,QAAOC,SAAAA,EAAMiB,qBAC7BR,SAAS,CAACV,MAAAA,EAAOC,KAAAA,OAGxBkB,mBAAA,SAAmBC,WAhBCC,EAAQC,EAiBnBtB,EAASuB,KAAKlB,MAAdL,MACAwB,EAAaD,KAAKf,MAAlBgB,UACO,OAAVxB,cAnBcqB,EAmBiBD,EAAUI,aAnB3BH,EAAI,cAAIC,EAmB8BE,KAnB9BF,EAAI,IAChCD,EAAEI,SAAWH,EAAEG,QAAUJ,EAAEK,MAAK,SAACC,EAAMC,UAAWhB,OAAOiB,GAAGF,EAAML,EAAEM,2BAmB3DpB,OAAMsB,6BAAoBV,EAAUI,UAAWA,QAC/Cd,SAASX,OAIlBgC,OAAA,iBACwBR,KAAKlB,MAApBL,IAAAA,MAAOC,IAAAA,OACwCsB,KAAKf,MAApDwB,IAAAA,eAAgBC,IAAAA,kBAAmBC,IAAAA,YAE5B,OAAVlC,EAAgB,KACZQ,EAAQ,CACZU,qBAAgBjB,SAAAA,EAAMiB,eACtBlB,MAAAA,EACAM,mBAAoBiB,KAAKjB,uBAEvB6B,EAAMC,eAAeF,UAChBA,EACF,GAA8B,mBAAnBF,SACTA,EAAexB,GACjB,GAAIyB,SACFE,gBAACF,EAAsBzB,SAExB,IAAI6B,MACR,qGAKCd,KAAKf,MAAM8B,aA5CMH,EAAMI,+CAgElC,SAAyBC,SACGL,EAAMM,SAAS,MAAlCzC,OAAO0C,UACVF,EAAY,MAAMA,KAClBxC,EAAO,MAAMA,SACV0C,uBApBT,SAA2BH,EAAWI,YAC3BC,EAAQpC,UAEb2B,gBAACjC,EAAkByC,EACjBR,gBAACI,EAAc/B,QAMfqC,EAAON,EAAUO,aAAeP,EAAUM,MAAQ,iBACxDD,EAAQE,iCAAmCD,MAEpCD"}