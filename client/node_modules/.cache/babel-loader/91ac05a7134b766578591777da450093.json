{"ast":null,"code":"var _jsxFileName = \"/Users/mehulgore/projects/dinin/client/src/restaurant/OrderQ.js\";\nimport React, { useState, useEffect, Fragment } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport * as firebase from \"firebase\";\nimport { useAlert } from \"react-alert\";\n\nconst OrderQ = props => {\n  const alert = useAlert();\n  var database = firebase.database();\n  const [orders, setOrders] = useState([]);\n  const [restaurant, setRestaurant] = useState(\"\");\n  const {\n    match\n  } = props;\n  const tempRest = match.params.restaurant;\n  const [numRequests, setNumRequests] = useState(0);\n\n  const sendStatus = (table, batch, seat_num, item_key, status) => {\n    database.ref(tempRest).child(\"tables\").child(table).child(\"batches\").child(batch).child(\"seat_data\").child(seat_num).child(\"items\").child(item_key).update({\n      status: status\n    });\n    alert.show(\"Table Notified\");\n  };\n\n  const removeBatchOrder = batch_key => {};\n\n  const completeBatch = (table, batch_key) => {\n    const thisTable = table;\n    var confirm = window.confirm(\"Are you sure all items are in?\");\n\n    if (confirm) {\n      database.ref(tempRest).child(\"tables\").once(\"value\").then(function (snapshot) {\n        return snapshot.hasChild(thisTable);\n      }).then(exists => {\n        if (exists && orders[batch_key] != null && orders[batch_key][\"seat_data\"] != null) {\n          for (var seat in orders[batch_key][\"seat_data\"]) {\n            for (var item_key in orders[batch_key][\"seat_data\"][seat][\"items\"]) {\n              database.ref(tempRest).child(\"tables\").child(table).child(\"batches\").child(batch_key).child(\"seat_data\").child(seat).child(\"items\").child(item_key).update({\n                status: \"Kitchen Preparing\"\n              });\n            }\n          }\n        }\n      }).then(() => {\n        database.ref(tempRest).child(\"order_queue\").child(batch_key).remove();\n        delete orders[batch_key];\n        alert.show(\"Removed From Queue, Table Notified\");\n      });\n    }\n  };\n\n  useEffect(() => {\n    setRestaurant(tempRest);\n    database.ref(tempRest).child(\"order_queue\").on(\"value\", function (snapshot) {\n      setOrders(snapshot.val());\n    });\n    database.ref(tempRest).child(\"requests\").on(\"value\", function (snapshot) {\n      setNumRequests(snapshot.numChildren());\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, \" Orders for \", restaurant, \" \"), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-around mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\" + tempRest + \"/tables\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-dark btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \" Manage Tables \"), \" \"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\" + tempRest + \"/requests\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-dark btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, \"Requests\", \" \", numRequests != 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, \" \", numRequests) : null), \" \")), Object.keys(orders || {}).map((batch_key, index) => {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: batch_key,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-around\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, \" Table \", orders[batch_key][\"table\"], \" \"), \" \"), Object.keys(orders[batch_key][\"seat_data\"] || {}).map((seat, i) => {\n      var items = orders[batch_key][\"seat_data\"][seat][\"items\"];\n      return /*#__PURE__*/React.createElement(Fragment, {\n        key: seat,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, \"Seat \", seat), Object.keys(items || {}).map((key, i) => {\n        var item = items[key];\n        return /*#__PURE__*/React.createElement(Fragment, {\n          key: key,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }\n        }, \" \", /*#__PURE__*/React.createElement(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 31\n          }\n        }, \" \", item[\"category\"], \" \"), \" \", item[\"quantity\"], \" \", item[\"title\"]), \" \"), \" \", item[\"notes\"] != \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 33\n          }\n        }, \"Notes\"), \" \", item[\"notes\"])) : null, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex justify-content-around\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-warning\",\n          onClick: () => sendStatus(orders[batch_key][\"table\"], batch_key, seat, key, \"Issue, Waiter Coming\"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 29\n          }\n        }, \"Issue\")));\n      }));\n    }), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-around\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success btn-lg btn-block\",\n      onClick: () => completeBatch(orders[batch_key][\"table\"], batch_key),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, \"Finish Table \", orders[batch_key][\"table\"])), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }));\n  }));\n};\n\nexport default OrderQ;","map":{"version":3,"sources":["/Users/mehulgore/projects/dinin/client/src/restaurant/OrderQ.js"],"names":["React","useState","useEffect","Fragment","firebase","useAlert","OrderQ","props","alert","database","orders","setOrders","restaurant","setRestaurant","match","tempRest","params","numRequests","setNumRequests","sendStatus","table","batch","seat_num","item_key","status","ref","child","update","show","removeBatchOrder","batch_key","completeBatch","thisTable","confirm","window","once","then","snapshot","hasChild","exists","seat","remove","on","val","numChildren","Object","keys","map","index","i","items","key","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport * as firebase from \"firebase\";\nimport { useAlert } from \"react-alert\";\n\nconst OrderQ = props => {\n  const alert = useAlert();\n  var database = firebase.database();\n  const [orders, setOrders] = useState([]);\n  const [restaurant, setRestaurant] = useState(\"\");\n  const { match } = props;\n  const tempRest = match.params.restaurant;\n  const [numRequests, setNumRequests] = useState(0);\n\n  const sendStatus = (table, batch, seat_num, item_key, status) => {\n    database\n      .ref(tempRest)\n      .child(\"tables\")\n      .child(table)\n      .child(\"batches\")\n      .child(batch)\n      .child(\"seat_data\")\n      .child(seat_num)\n      .child(\"items\")\n      .child(item_key)\n      .update({ status: status });\n\n    alert.show(\"Table Notified\");\n  };\n\n  const removeBatchOrder = batch_key => {};\n\n  const completeBatch = (table, batch_key) => {\n    const thisTable = table;\n    var confirm = window.confirm(\"Are you sure all items are in?\");\n    if (confirm) {\n      database\n        .ref(tempRest)\n        .child(\"tables\")\n        .once(\"value\")\n        .then(function(snapshot) {\n          return snapshot.hasChild(thisTable);\n        })\n        .then(exists => {\n          if (\n            exists &&\n            orders[batch_key] != null &&\n            orders[batch_key][\"seat_data\"] != null\n          ) {\n            for (var seat in orders[batch_key][\"seat_data\"]) {\n              for (var item_key in orders[batch_key][\"seat_data\"][seat][\n                \"items\"\n              ]) {\n                database\n                  .ref(tempRest)\n                  .child(\"tables\")\n                  .child(table)\n                  .child(\"batches\")\n                  .child(batch_key)\n                  .child(\"seat_data\")\n                  .child(seat)\n                  .child(\"items\")\n                  .child(item_key)\n                  .update({ status: \"Kitchen Preparing\" });\n              }\n            }\n          }\n        })\n        .then(() => {\n          database\n            .ref(tempRest)\n            .child(\"order_queue\")\n            .child(batch_key)\n            .remove();\n\n          delete orders[batch_key];\n\n          alert.show(\"Removed From Queue, Table Notified\");\n        });\n    }\n  };\n\n  useEffect(() => {\n    setRestaurant(tempRest);\n    database\n      .ref(tempRest)\n      .child(\"order_queue\")\n      .on(\"value\", function(snapshot) {\n        setOrders(snapshot.val());\n      });\n    database\n      .ref(tempRest)\n      .child(\"requests\")\n      .on(\"value\", function(snapshot) {\n        setNumRequests(snapshot.numChildren());\n      });\n  }, []);\n\n  return (\n    <div className=\"container mt-5\">\n      <div className=\"d-flex justify-content-around\">\n        {\" \"}\n        <h1> Orders for {restaurant} </h1>{\" \"}\n      </div>\n      <div className=\"d-flex justify-content-around mb-3\">\n        <a href={\"/\" + tempRest + \"/tables\"}>\n          <button className=\"btn btn-dark btn-lg\"> Manage Tables </button>{\" \"}\n        </a>\n        <a href={\"/\" + tempRest + \"/requests\"}>\n          <button className=\"btn btn-dark btn-lg\">\n            Requests{\" \"}\n            {numRequests != 0 ? (\n              <span className=\"badge badge-success\"> {numRequests}</span>\n            ) : null}\n          </button>{\" \"}\n        </a>\n      </div>\n      {Object.keys(orders || {}).map((batch_key, index) => {\n        return (\n          <Fragment key={batch_key}>\n            <div className=\"d-flex justify-content-around\">\n              <h2> Table {orders[batch_key][\"table\"]} </h2>{\" \"}\n            </div>\n            {Object.keys(orders[batch_key][\"seat_data\"] || {}).map(\n              (seat, i) => {\n                var items = orders[batch_key][\"seat_data\"][seat][\"items\"];\n                return (\n                  <Fragment key={seat}>\n                    <h3>Seat {seat}</h3>\n                    {Object.keys(items || {}).map((key, i) => {\n                      var item = items[key];\n                      return (\n                        <Fragment key={key}>\n                          <div>\n                            <h4>\n                              {\" \"}\n                              <strong> {item[\"category\"]} </strong>{\" \"}\n                              {item[\"quantity\"]} {item[\"title\"]}\n                            </h4>{\" \"}\n                          </div>{\" \"}\n                          {item[\"notes\"] != \"\" ? (\n                            <div>\n                              <h4>\n                                <strong>Notes</strong> {item[\"notes\"]}\n                              </h4>\n                            </div>\n                          ) : null}\n                          <div className=\"d-flex justify-content-around\">\n                            <button\n                              className=\"btn btn-warning\"\n                              onClick={() =>\n                                sendStatus(\n                                  orders[batch_key][\"table\"],\n                                  batch_key,\n                                  seat,\n                                  key,\n                                  \"Issue, Waiter Coming\"\n                                )\n                              }\n                            >\n                              Issue\n                            </button>\n                          </div>\n                        </Fragment>\n                      );\n                    })}\n                  </Fragment>\n                );\n              }\n            )}\n            <hr />\n            <div className=\"d-flex justify-content-around\">\n              <button\n                className=\"btn btn-success btn-lg btn-block\"\n                onClick={() =>\n                  completeBatch(orders[batch_key][\"table\"], batch_key)\n                }\n              >\n                Finish Table {orders[batch_key][\"table\"]}\n              </button>\n            </div>\n            <hr />\n          </Fragment>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default OrderQ;\n"]},"metadata":{},"sourceType":"module"}