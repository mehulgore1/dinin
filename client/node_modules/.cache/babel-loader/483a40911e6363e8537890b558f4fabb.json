{"ast":null,"code":"var _jsxFileName = \"/Users/mehulgore/projects/dinin/client/src/Tables.js\";\nimport React, { useState, useEffect, Fragment } from \"react\";\nimport \"./App.css\";\nimport * as firebase from \"firebase\";\n\nconst Tables = props => {\n  var database = firebase.database();\n  const [tables, setTables] = useState([]);\n  const {\n    match\n  } = props;\n  useEffect(() => {\n    database.ref(match.params.restaurant).child(\"tables\").on(\"value\", function (snapshot) {\n      if (snapshot.val() != null) {\n        setTables(Object.keys(snapshot.val()));\n      } else {\n        setTables([]);\n      }\n    });\n  }, []);\n\n  const finishSession = tableNum => {\n    database.ref(match.params.restaurant).child(\"tables\").child(tableNum).child(\"users\").once(\"value\").then(function (snapshot) {\n      return snapshot.val();\n    }).then(users => {\n      database.ref(match.params.restaurant).child(\"tables\").child(tableNum).child(\"past_users\").update(users);\n    }).then(irr => {\n      database.ref(match.params.restaurant).child(\"tables\").child(tableNum).child(\"users\").remove();\n      database.ref(match.params.restaurant).child(\"tables\").child(tableNum).child(\"batches\").remove();\n      database.ref(match.params.restaurant).child(\"tables\").child(tableNum).child(\"requests\").remove();\n      window.alert(\"Table is Empty and Ready for Next Customer\");\n    });\n  };\n\n  const showConfirmAlert = tableNum => {\n    var confirmOrder = window.confirm(\"Are you sure? All table data will be deleted\");\n\n    if (confirmOrder) {\n      finishSession(tableNum);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \" Table Management \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\" + match.params.restaurant + \"/orders\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-lg btn-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, \"Orders\"), \" \"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\" + match.params.restaurant + \"/requests\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-dark btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \" View Requests \"), \" \")), tables.map(tableNum => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: tableNum,\n      className: \"d-flex justify-content-around mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \" Table \", tableNum, \" \"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => showConfirmAlert(tableNum),\n      className: \"btn btn btn-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, \" \", \"Finish Table Session\", \" \"));\n  }));\n};\n\nexport default Tables;","map":{"version":3,"sources":["/Users/mehulgore/projects/dinin/client/src/Tables.js"],"names":["React","useState","useEffect","Fragment","firebase","Tables","props","database","tables","setTables","match","ref","params","restaurant","child","on","snapshot","val","Object","keys","finishSession","tableNum","once","then","users","update","irr","remove","window","alert","showConfirmAlert","confirmOrder","confirm","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport \"./App.css\";\nimport * as firebase from \"firebase\";\n\nconst Tables = props => {\n  var database = firebase.database();\n  const [tables, setTables] = useState([]);\n  const { match } = props;\n\n  useEffect(() => {\n    database\n      .ref(match.params.restaurant)\n      .child(\"tables\")\n      .on(\"value\", function(snapshot) {\n        if (snapshot.val() != null) {\n          setTables(Object.keys(snapshot.val()));\n        } else {\n          setTables([]);\n        }\n      });\n  }, []);\n\n  const finishSession = tableNum => {\n    database\n      .ref(match.params.restaurant)\n      .child(\"tables\")\n      .child(tableNum)\n      .child(\"users\")\n      .once(\"value\")\n      .then(function(snapshot) {\n        return snapshot.val();\n      })\n      .then(users => {\n        database\n          .ref(match.params.restaurant)\n          .child(\"tables\")\n          .child(tableNum)\n          .child(\"past_users\")\n          .update(users);\n      })\n      .then(irr => {\n        database\n          .ref(match.params.restaurant)\n          .child(\"tables\")\n          .child(tableNum)\n          .child(\"users\")\n          .remove();\n\n        database\n          .ref(match.params.restaurant)\n          .child(\"tables\")\n          .child(tableNum)\n          .child(\"batches\")\n          .remove();\n\n        database\n          .ref(match.params.restaurant)\n          .child(\"tables\")\n          .child(tableNum)\n          .child(\"requests\")\n          .remove();\n        window.alert(\"Table is Empty and Ready for Next Customer\");\n      });\n  };\n\n  const showConfirmAlert = tableNum => {\n    var confirmOrder = window.confirm(\n      \"Are you sure? All table data will be deleted\"\n    );\n    if (confirmOrder) {\n      finishSession(tableNum);\n    }\n  };\n\n  return (\n    <div className=\"container mt-5\">\n      <div className=\"d-flex justify-content-center\">\n        <h1> Table Management </h1>\n      </div>\n      <div className=\"d-flex justify-content-around\">\n        <a href={\"/\" + match.params.restaurant + \"/orders\"}>\n          {\" \"}\n          <button className=\"btn btn-lg btn-dark\">Orders</button>{\" \"}\n        </a>\n        <a href={\"/\" + match.params.restaurant + \"/requests\"}>\n          <button className=\"btn btn-dark btn-lg\"> View Requests </button>{\" \"}\n        </a>\n      </div>\n      {tables.map(tableNum => {\n        return (\n          <div key={tableNum} className=\"d-flex justify-content-around mt-3\">\n            <h1> Table {tableNum} </h1>\n            <button\n              onClick={() => showConfirmAlert(tableNum)}\n              className=\"btn btn btn-danger\"\n            >\n              {\" \"}\n              Finish Table Session{\" \"}\n            </button>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Tables;\n"]},"metadata":{},"sourceType":"module"}