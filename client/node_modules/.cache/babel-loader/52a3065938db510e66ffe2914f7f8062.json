{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) : typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) : (global = global || self, factory(global.ReactErrorBoundary = {}, global.React));\n})(this, function (exports, React) {\n  'use strict';\n\n  React = React && Object.prototype.hasOwnProperty.call(React, 'default') ? React['default'] : React;\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  var changedArray = function (a, b) {\n    if (a === void 0) {\n      a = [];\n    }\n\n    if (b === void 0) {\n      b = [];\n    }\n\n    return a.length !== b.length || a.some(function (item, index) {\n      return !Object.is(item, b[index]);\n    });\n  };\n\n  var initialState = {\n    error: null,\n    info: null\n  };\n\n  var ErrorBoundary = /*#__PURE__*/function (_React$Component) {\n    _inheritsLoose(ErrorBoundary, _React$Component);\n\n    function ErrorBoundary() {\n      var _this;\n\n      for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n        _args[_key] = arguments[_key];\n      }\n\n      _this = _React$Component.call.apply(_React$Component, [this].concat(_args)) || this;\n      _this.state = initialState;\n\n      _this.resetErrorBoundary = function () {\n        var _this$props;\n\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        _this.props.onReset == null ? void 0 : (_this$props = _this.props).onReset.apply(_this$props, args);\n\n        _this.setState(initialState);\n      };\n\n      return _this;\n    }\n\n    var _proto = ErrorBoundary.prototype;\n\n    _proto.componentDidCatch = function componentDidCatch(error, info) {\n      var _this$props$onError, _this$props2;\n\n      (_this$props$onError = (_this$props2 = this.props).onError) == null ? void 0 : _this$props$onError.call(_this$props2, error, info == null ? void 0 : info.componentStack);\n      this.setState({\n        error: error,\n        info: info\n      });\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n      var error = this.state.error;\n      var resetKeys = this.props.resetKeys;\n\n      if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n        var _this$props$onResetKe, _this$props3;\n\n        (_this$props$onResetKe = (_this$props3 = this.props).onResetKeysChange) == null ? void 0 : _this$props$onResetKe.call(_this$props3, prevProps.resetKeys, resetKeys);\n        this.setState(initialState);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          info = _this$state.info;\n      var _this$props4 = this.props,\n          fallbackRender = _this$props4.fallbackRender,\n          FallbackComponent = _this$props4.FallbackComponent,\n          fallback = _this$props4.fallback;\n\n      if (error !== null) {\n        var props = {\n          componentStack: info == null ? void 0 : info.componentStack,\n          error: error,\n          resetErrorBoundary: this.resetErrorBoundary\n        };\n\n        if ( /*#__PURE__*/React.isValidElement(fallback)) {\n          return fallback;\n        } else if (typeof fallbackRender === 'function') {\n          return fallbackRender(props);\n        } else if (FallbackComponent) {\n          return /*#__PURE__*/React.createElement(FallbackComponent, props);\n        } else {\n          throw new Error('react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop');\n        }\n      }\n\n      return this.props.children;\n    };\n\n    return ErrorBoundary;\n  }(React.Component);\n\n  function withErrorBoundary(Component, errorBoundaryProps) {\n    function Wrapped(props) {\n      return /*#__PURE__*/React.createElement(ErrorBoundary, errorBoundaryProps, /*#__PURE__*/React.createElement(Component, props));\n    } // Format for display in DevTools\n\n\n    var name = Component.displayName || Component.name || 'Unknown';\n    Wrapped.displayName = \"withErrorBoundary(\" + name + \")\";\n    return Wrapped;\n  }\n\n  function useErrorHandler(givenError) {\n    var _React$useState = React.useState(null),\n        error = _React$useState[0],\n        setError = _React$useState[1];\n\n    if (givenError) throw givenError;\n    if (error) throw error;\n    return setError;\n  }\n\n  exports.ErrorBoundary = ErrorBoundary;\n  exports.useErrorHandler = useErrorHandler;\n  exports.withErrorBoundary = withErrorBoundary;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../src/index.js"],"names":["subClass","Object","superClass","changedArray","a","b","initialState","error","info","ErrorBoundary","React","Component","state","resetErrorBoundary","args","componentDidCatch","componentDidUpdate","resetKeys","prevProps","render","fallbackRender","FallbackComponent","fallback","props","componentStack","name","Wrapped","setError"],"mappings":";;;;;;;AAAe,WAAA,cAAA,CAAA,QAAA,EAAA,UAAA,EAA8C;AAC3DA,IAAAA,QAAQ,CAARA,SAAAA,GAAqBC,MAAM,CAANA,MAAAA,CAAcC,UAAU,CAA7CF,SAAqBC,CAArBD;AACAA,IAAAA,QAAQ,CAARA,SAAAA,CAAAA,WAAAA,GAAAA,QAAAA;AACAA,IAAAA,QAAQ,CAARA,SAAAA,GAAAA,UAAAA;AACD;;ACFD,MAAMG,YAAY,GAAG,UAAA,CAAA,EAAA,CAAA,EAAA;AAAA,QAACC,CAAD,KAAA,KAAA,CAAA,EAAA;AAACA,MAAAA,CAAD,GAAA,EAACA;AAAD;;AAAA,QAASC,CAAT,KAAA,KAAA,CAAA,EAAA;AAASA,MAAAA,CAAT,GAAA,EAASA;AAAT;;AAAA,WACnBD,CAAC,CAADA,MAAAA,KAAaC,CAAC,CAAdD,MAAAA,IAAyB,CAAC,CAAD,IAAA,CAAO,UAAA,IAAA,EAAA,KAAA,EAAA;AAAA,aAAiB,CAACH,MAAM,CAANA,EAAAA,CAAAA,IAAAA,EAAgBI,CAAC,CAAnC,KAAmC,CAAjBJ,CAAlB;AADb,KACM,CADN;AAArB,GAAA;;AAGA,MAAMK,YAAY,GAAG;AAACC,IAAAA,KAAK,EAAN,IAAA;AAAcC,IAAAA,IAAI,EAAE;AAApB,GAArB;;MACMC,aAAAA,GAAAA,aAAAA,UAAAA,gBAAAA,EAAAA;;;;;;;;;;;YACJG,K,GAAQN,Y;;YACRO,kB,GAAqB,YAAa;AAAA,YAAA,WAAA;;AAAA,aAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAATC,IAAS,GAAA,IAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;AAATA,UAAAA,IAAS,CAAA,KAAA,CAATA,GAAS,SAAA,CAAA,KAAA,CAATA;AAAS;;AAChC,QAAA,KAAA,CAAA,KAAA,CAAA,OAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,CAAA,WAAA,GAAA,KAAA,CAAA,KAAA,EAAA,OAAA,CAAA,KAAA,CAAA,WAAA,EAAA,IAAA,CAAA;;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,YAAA;AACD,O;;;;;;;WAEDC,iB,GAAAA,SAAAA,iBAAAA,CAAAA,KAAAA,EAAAA,IAAAA,EAA+B;AAAA,UAAA,mBAAA,EAAA,YAAA;;AAC7B,OAAA,mBAAA,GAAA,CAAA,YAAA,GAAA,KAAA,KAAA,EAAA,OAAA,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,mBAAA,CAAA,IAAA,CAAA,YAAA,EAAA,KAAA,EAA4BP,IAA5B,IAAA,IAA4BA,GAA5B,KAAA,CAA4BA,GAAAA,IAAI,CAAhC,cAAA,CAAA;AACA,WAAA,QAAA,CAAc;AAACD,QAAAA,KAAK,EAAN,KAAA;AAAQC,QAAAA,IAAI,EAAJA;AAAR,OAAd;AACD,K;;WAEDQ,kB,GAAAA,SAAAA,kBAAAA,CAAAA,SAAAA,EAA8B;AAAA,UACrBT,KADqB,GACZ,KADY,KACZ,CADY,KAAA;AAAA,UAErBU,SAFqB,GAER,KAFQ,KAER,CAFQ,SAAA;;AAG5B,UAAIV,KAAK,KAALA,IAAAA,IAAkBJ,YAAY,CAACe,SAAS,CAAV,SAAA,EAAlC,SAAkC,CAAlC,EAAoE;AAAA,YAAA,qBAAA,EAAA,YAAA;;AAClE,SAAA,qBAAA,GAAA,CAAA,YAAA,GAAA,KAAA,KAAA,EAAA,iBAAA,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAAA,IAAA,CAAA,YAAA,EAA+BA,SAAS,CAAxC,SAAA,EAAA,SAAA,CAAA;AACA,aAAA,QAAA,CAAA,YAAA;AACD;AACF,K;;WAEDC,M,GAAAA,SAAAA,MAAAA,GAAS;AAAA,UAAA,WAAA,GACe,KADf,KAAA;AAAA,UACAZ,KADA,GAAA,WAAA,CAAA,KAAA;AAAA,UACOC,IADP,GAAA,WAAA,CAAA,IAAA;AAAA,UAAA,YAAA,GAE+C,KAF/C,KAAA;AAAA,UAEAY,cAFA,GAAA,YAAA,CAAA,cAAA;AAAA,UAEgBC,iBAFhB,GAAA,YAAA,CAAA,iBAAA;AAAA,UAEmCC,QAFnC,GAAA,YAAA,CAAA,QAAA;;AAIP,UAAIf,KAAK,KAAT,IAAA,EAAoB;AAClB,YAAMgB,KAAK,GAAG;AACZC,UAAAA,cAAc,EAAEhB,IAAF,IAAA,IAAEA,GAAF,KAAA,CAAEA,GAAAA,IAAI,CADR,cAAA;AAEZD,UAAAA,KAAK,EAFO,KAAA;AAGZM,UAAAA,kBAAkB,EAAE,KAAKA;AAHb,SAAd;;AAKA,aAAA,aAAIH,KAAK,CAALA,cAAAA,CAAJ,QAAIA,CAAJ,EAAoC;AAClC,iBAAA,QAAA;AADF,SAAA,MAEO,IAAI,OAAA,cAAA,KAAJ,UAAA,EAA0C;AAC/C,iBAAOU,cAAc,CAArB,KAAqB,CAArB;AADK,SAAA,MAEA,IAAA,iBAAA,EAAuB;AAC5B,iBAAA,aAAO,KAAA,CAAA,aAAA,CAAA,iBAAA,EAAP,KAAO,CAAP;AADK,SAAA,MAEA;AACL,gBAAM,IAAA,KAAA,CAAN,4FAAM,CAAN;AAGD;AACF;;AAED,aAAO,KAAA,KAAA,CAAP,QAAA;AACD,K;;;GA7CGX,CAAsBC,KAAK,CAACC,SAA5BF,C;;AAgDN,WAAA,iBAAA,CAAA,SAAA,EAAA,kBAAA,EAA0D;AACxD,aAAA,OAAA,CAAA,KAAA,EAAwB;AACtB,aAAA,aACE,KAAA,CAAA,aAAA,CAAA,aAAA,EAAA,kBAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,SAAA,EAFJ,KAEI,CADF,CADF;AAFsD,KAAA,CAAA;;;AAUxD,QAAMgB,IAAI,GAAGd,SAAS,CAATA,WAAAA,IAAyBA,SAAS,CAAlCA,IAAAA,IAAb,SAAA;AACAe,IAAAA,OAAO,CAAPA,WAAAA,GAAAA,uBAAAA,IAAAA,GAAAA,GAAAA;AAEA,WAAA,OAAA;AACD;;AAED,WAAA,eAAA,CAAA,UAAA,EAAqC;AAAA,QAAA,eAAA,GACThB,KAAK,CAALA,QAAAA,CADS,IACTA,CADS;AAAA,QAC5BH,KAD4B,GAAA,eAAA,CAAA,CAAA,CAAA;AAAA,QACrBoB,QADqB,GAAA,eAAA,CAAA,CAAA,CAAA;;AAEnC,QAAA,UAAA,EAAgB,MAAA,UAAA;AAChB,QAAA,KAAA,EAAW,MAAA,KAAA;AACX,WAAA,QAAA;AACD","sourcesContent":["export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import React from 'react'\n\nconst changedArray = (a = [], b = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = {error: null, info: null}\nclass ErrorBoundary extends React.Component {\n  state = initialState\n  resetErrorBoundary = (...args) => {\n    this.props.onReset?.(...args)\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error, info) {\n    this.props.onError?.(error, info?.componentStack)\n    this.setState({error, info})\n  }\n\n  componentDidUpdate(prevProps) {\n    const {error} = this.state\n    const {resetKeys} = this.props\n    if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.setState(initialState)\n    }\n  }\n\n  render() {\n    const {error, info} = this.state\n    const {fallbackRender, FallbackComponent, fallback} = this.props\n\n    if (error !== null) {\n      const props = {\n        componentStack: info?.componentStack,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop',\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary(Component, errorBoundaryProps) {\n  function Wrapped(props) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler(givenError) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport {ErrorBoundary, withErrorBoundary, useErrorHandler}\n"]},"metadata":{},"sourceType":"script"}