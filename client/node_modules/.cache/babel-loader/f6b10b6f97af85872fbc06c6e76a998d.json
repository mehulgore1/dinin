{"ast":null,"code":"var _jsxFileName = \"/Users/mehulgore/projects/dinin/client/src/Requests.js\";\nimport React, { useState, useEffect, Fragment } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport * as firebase from \"firebase\";\nimport { useAlert } from \"react-alert\";\n\nconst Requests = props => {\n  const alert = useAlert();\n  const [requests, setRequests] = useState({});\n  var database = firebase.database();\n  const {\n    match\n  } = props;\n  const [numOrders, setNumOrders] = useState(0);\n  useEffect(() => {\n    database.ref(match.params.restaurant).child(\"requests\").on(\"value\", function (snapshot) {\n      setRequests(snapshot.val());\n    });\n    database.ref(match.params.restaurant).child(\"order_queue\").on(\"value\", function (snapshot) {\n      setNumOrders(snapshot.numChildren());\n    });\n  }, []);\n\n  const completeRequest = request_key => {\n    var table = requests[request_key][\"table\"];\n    delete requests[request_key];\n    database.ref(match.params.restaurant).child(\"requests\").child(request_key).remove();\n    database.ref(match.params.restaurant).child(\"tables\").child(table).child(\"requests\").child(request_key).remove();\n  };\n\n  const ackRequest = request_key => {\n    var table = requests[request_key][\"table\"];\n    database.ref(match.params.restaurant).child(\"tables\").child(table).child(\"requests\").child(request_key).child(\"status\").set(\"Seen\");\n    database.ref(match.params.restaurant).child(\"requests\").child(request_key).child(\"status\").set(\"Seen\");\n    alert.show(\"Table Notified\");\n  };\n\n  const requestSeen = request_key => {\n    return requests[request_key] != null && requests[request_key][\"status\"] == \"Seen\";\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, \" Waiter requests for \", match.params.restaurant, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-around mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\" + match.params.restaurant + \"/tables\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-dark btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \" Manage Tables \"), \" \"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\" + match.params.restaurant + \"/orders\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-dark btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, \" \", \"Orders\", \" \", numOrders != 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \" \", numOrders) : null), \" \")), Object.keys(requests || {}).map((request_key, index) => {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: request_key,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-around mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, \" \", \"Table \", requests[request_key][\"table\"], \":\", \" \", requests[request_key][\"request\"], \" \")), \" \", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-around\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, requestSeen(request_key) ? /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, \" Seen \\u2713 \") : /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => ackRequest(request_key),\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, \" \", \"Acknowledge\", \" \"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => completeRequest(request_key),\n      className: \"btn btn-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, \" \", \"Complete\", \" \")));\n  }));\n};\n\nexport default Requests;","map":{"version":3,"sources":["/Users/mehulgore/projects/dinin/client/src/Requests.js"],"names":["React","useState","useEffect","Fragment","firebase","useAlert","Requests","props","alert","requests","setRequests","database","match","numOrders","setNumOrders","ref","params","restaurant","child","on","snapshot","val","numChildren","completeRequest","request_key","table","remove","ackRequest","set","show","requestSeen","Object","keys","map","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport * as firebase from \"firebase\";\nimport { useAlert } from \"react-alert\";\n\nconst Requests = props => {\n  const alert = useAlert();\n  const [requests, setRequests] = useState({});\n  var database = firebase.database();\n  const { match } = props;\n  const [numOrders, setNumOrders] = useState(0);\n\n  useEffect(() => {\n    database\n      .ref(match.params.restaurant)\n      .child(\"requests\")\n      .on(\"value\", function(snapshot) {\n        setRequests(snapshot.val());\n      });\n    database\n      .ref(match.params.restaurant)\n      .child(\"order_queue\")\n      .on(\"value\", function(snapshot) {\n        setNumOrders(snapshot.numChildren());\n      });\n  }, []);\n\n  const completeRequest = request_key => {\n    var table = requests[request_key][\"table\"];\n    delete requests[request_key];\n    database\n      .ref(match.params.restaurant)\n      .child(\"requests\")\n      .child(request_key)\n      .remove();\n\n    database\n      .ref(match.params.restaurant)\n      .child(\"tables\")\n      .child(table)\n      .child(\"requests\")\n      .child(request_key)\n      .remove();\n  };\n\n  const ackRequest = request_key => {\n    var table = requests[request_key][\"table\"];\n    database\n      .ref(match.params.restaurant)\n      .child(\"tables\")\n      .child(table)\n      .child(\"requests\")\n      .child(request_key)\n      .child(\"status\")\n      .set(\"Seen\");\n\n    database\n      .ref(match.params.restaurant)\n      .child(\"requests\")\n      .child(request_key)\n      .child(\"status\")\n      .set(\"Seen\");\n\n    alert.show(\"Table Notified\");\n  };\n\n  const requestSeen = request_key => {\n    return (\n      requests[request_key] != null && requests[request_key][\"status\"] == \"Seen\"\n    );\n  };\n\n  return (\n    <div className=\"container mt-5\">\n      <h1> Waiter requests for {match.params.restaurant} </h1>\n      <div className=\"d-flex justify-content-around mb-3\">\n        <a href={\"/\" + match.params.restaurant + \"/tables\"}>\n          <button className=\"btn btn-dark btn-lg\"> Manage Tables </button>{\" \"}\n        </a>\n        <a href={\"/\" + match.params.restaurant + \"/orders\"}>\n          <button className=\"btn btn-dark btn-lg\">\n            {\" \"}\n            Orders{\" \"}\n            {numOrders != 0 ? (\n              <span className=\"badge badge-success\"> {numOrders}</span>\n            ) : null}\n          </button>{\" \"}\n        </a>\n      </div>\n      {Object.keys(requests || {}).map((request_key, index) => {\n        return (\n          <Fragment key={request_key}>\n            <div className=\"d-flex justify-content-around mt-4\">\n              <h3>\n                {\" \"}\n                Table {requests[request_key][\"table\"]}:{\" \"}\n                {requests[request_key][\"request\"]}{\" \"}\n              </h3>\n            </div>{\" \"}\n            <div className=\"d-flex justify-content-around\">\n              {requestSeen(request_key) ? (\n                <h2> Seen ✓ </h2>\n              ) : (\n                <button\n                  onClick={() => ackRequest(request_key)}\n                  className=\"btn btn-primary\"\n                >\n                  {\" \"}\n                  Acknowledge{\" \"}\n                </button>\n              )}\n              <button\n                onClick={() => completeRequest(request_key)}\n                className=\"btn btn-success\"\n              >\n                {\" \"}\n                Complete{\" \"}\n              </button>\n            </div>\n          </Fragment>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Requests;\n"]},"metadata":{},"sourceType":"module"}