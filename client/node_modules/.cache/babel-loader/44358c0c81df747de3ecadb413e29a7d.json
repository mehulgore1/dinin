{"ast":null,"code":"var _jsxFileName = \"/Users/mehulgore/projects/dinin/client/src/eater/WaiterRequest.js\";\nimport React, { useState, useEffect, Fragment } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport * as firebase from \"firebase\";\nimport { useAlert, positions } from \"react-alert\";\n\nconst WaiterRequest = props => {\n  const alert = useAlert();\n  var database = firebase.database();\n  const [userId, setUserId] = useState({});\n  const [users, setUsers] = useState({}); //const [request, setRequest] = useState(\"Get water\");\n  //   const handleRequestChange = event => {\n  //     setRequest(event.target.value);\n  //   };\n\n  const formatAMPM = date => {\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    var ampm = hours >= 12 ? \"PM\" : \"AM\";\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n\n    minutes = minutes < 10 ? \"0\" + minutes : minutes;\n    var strTime = hours + \":\" + minutes + \" \" + ampm;\n    return strTime;\n  };\n\n  const handleSendRequest = request => {\n    var time = formatAMPM(new Date());\n    const requestObj = {\n      table: props.match.params.table,\n      request: request,\n      status: \"Pending\",\n      requestedAt: time\n    };\n    var key = database.ref(props.match.params.restaurant).child(\"tables\").child(props.match.params.table).child(\"requests\").push(requestObj).key;\n    database.ref(props.match.params.restaurant).child(\"requests\").child(key).set(requestObj);\n    alert.show(\"Waitstaff Notified\", {\n      timeout: 2000,\n      position: positions.MIDDLE\n    });\n  };\n\n  const showInputConfirmAlert = () => {\n    var notes = window.prompt(\"Enter message to waitstaff\");\n\n    if (notes != null) {\n      handleSendRequest(notes);\n    }\n  };\n\n  const getWater = () => {\n    if (users[userId] != null) {\n      if (users[userId][\"water_ordered\"]) {\n        // has already ordered water, refill\n        handleSendRequest(\"Water Refill Requested\");\n      } else {\n        // hasn't ordered water get 1 glass\n        handleSendRequest(\"One New Glass of Water Requested\");\n        database.ref(props.match.params.restaurant).child(\"tables\").child(props.match.params.table).child(\"users\").child(userId).child(\"water_ordered\").set(true);\n      }\n    }\n  };\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        console.log(\"user signed in \");\n        setUserId(user.uid);\n      } else {\n        console.log(\"user NOT signed in \");\n      }\n    });\n    database.ref(props.match.params.restaurant).child(\"tables\").child(props.match.params.table).child(\"users\").on(\"value\", function (snapshot) {\n      setUsers(snapshot.val());\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-around mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-warning btn-lg\",\n    onClick: showInputConfirmAlert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, \"Waiter Request\"));\n};\n\nexport default WaiterRequest;","map":{"version":3,"sources":["/Users/mehulgore/projects/dinin/client/src/eater/WaiterRequest.js"],"names":["React","useState","useEffect","Fragment","firebase","useAlert","positions","WaiterRequest","props","alert","database","userId","setUserId","users","setUsers","formatAMPM","date","hours","getHours","minutes","getMinutes","ampm","strTime","handleSendRequest","request","time","Date","requestObj","table","match","params","status","requestedAt","key","ref","restaurant","child","push","set","show","timeout","position","MIDDLE","showInputConfirmAlert","notes","window","prompt","getWater","auth","onAuthStateChanged","user","console","log","uid","on","snapshot","val"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport * as firebase from \"firebase\";\nimport { useAlert, positions } from \"react-alert\";\n\nconst WaiterRequest = props => {\n  const alert = useAlert();\n  var database = firebase.database();\n  const [userId, setUserId] = useState({});\n  const [users, setUsers] = useState({});\n  //const [request, setRequest] = useState(\"Get water\");\n\n  //   const handleRequestChange = event => {\n  //     setRequest(event.target.value);\n  //   };\n\n  const formatAMPM = date => {\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    var ampm = hours >= 12 ? \"PM\" : \"AM\";\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n    minutes = minutes < 10 ? \"0\" + minutes : minutes;\n    var strTime = hours + \":\" + minutes + \" \" + ampm;\n    return strTime;\n  };\n\n  const handleSendRequest = request => {\n    var time = formatAMPM(new Date());\n    const requestObj = {\n      table: props.match.params.table,\n      request: request,\n      status: \"Pending\",\n      requestedAt: time\n    };\n    var key = database\n      .ref(props.match.params.restaurant)\n      .child(\"tables\")\n      .child(props.match.params.table)\n      .child(\"requests\")\n      .push(requestObj).key;\n\n    database\n      .ref(props.match.params.restaurant)\n      .child(\"requests\")\n      .child(key)\n      .set(requestObj);\n\n    alert.show(\"Waitstaff Notified\", {\n      timeout: 2000,\n      position: positions.MIDDLE\n    });\n  };\n\n  const showInputConfirmAlert = () => {\n    var notes = window.prompt(\"Enter message to waitstaff\");\n    if (notes != null) {\n      handleSendRequest(notes);\n    }\n  };\n\n  const getWater = () => {\n    if (users[userId] != null) {\n      if (users[userId][\"water_ordered\"]) {\n        // has already ordered water, refill\n        handleSendRequest(\"Water Refill Requested\");\n      } else {\n        // hasn't ordered water get 1 glass\n        handleSendRequest(\"One New Glass of Water Requested\");\n        database\n          .ref(props.match.params.restaurant)\n          .child(\"tables\")\n          .child(props.match.params.table)\n          .child(\"users\")\n          .child(userId)\n          .child(\"water_ordered\")\n          .set(true);\n      }\n    }\n  };\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(function(user) {\n      if (user) {\n        console.log(\"user signed in \");\n        setUserId(user.uid);\n      } else {\n        console.log(\"user NOT signed in \");\n      }\n    });\n    database\n      .ref(props.match.params.restaurant)\n      .child(\"tables\")\n      .child(props.match.params.table)\n      .child(\"users\")\n      .on(\"value\", function(snapshot) {\n        setUsers(snapshot.val());\n      });\n  }, []);\n\n  return (\n    <div className=\"d-flex justify-content-around mt-3\">\n      <button\n        className=\"btn btn-warning btn-lg\"\n        onClick={showInputConfirmAlert}\n      >\n        Waiter Request\n      </button>\n      {/* <a\n        href={\n          \"/\" +\n          props.match.params.restaurant +\n          \"/\" +\n          props.match.params.table +\n          \"/receipt\"\n        }\n      >\n        <button className=\"btn btn-dark btn-lg\">Your Items</button>{\" \"}\n      </a> */}\n    </div>\n  );\n};\n\nexport default WaiterRequest;\n"]},"metadata":{},"sourceType":"module"}